(function(g){function z(b){this.init(b||{});}function A(b){this.init(b||{});}function u(b){document.removeEventListener("mousemove",u);document.removeEventListener("touchstart",u);document.addEventListener("mousemove",v);document.addEventListener("touchmove",v);document.addEventListener("touchstart",B);v(b);p();w();}function p(){x=[];for(var b=0;b<f.trails;b++)x.push(new A({spring:0.45+b/f.trails*0.025}));}function w(){if(c.running){c.globalCompositeOperation="source-over";c.fillStyle="rgba(8,5,16,0.4)";c.fillRect(0,0,c.canvas.width,c.canvas.height);c.globalCompositeOperation="lighter";c.strokeStyle="hsla("+Math.round(l.update())+",90%,50%,0.25)";c.lineWidth=1;0==c.frame%60&&console.log(l.update(),Math.round(l.update()),l.phase,l.offset,l.frequency,l.amplitude);for(var b=0,d;b<f.trails;b++)(d=x[b]),d.update(),d.draw();c.frame++;c.stats.update();requestAnimFrame(w);}}function y(){c.canvas.width=g.innerWidth;c.canvas.height=g.innerHeight;}function C(){c.running||(c.running=!0,w());}function D(){c.running=!1;}function v(b){b.touches?(q=b.touches[0].pageX,r=b.touches[0].pageY):(q=b.clientX,r=b.clientY);b.preventDefault();}function B(b){1==b.touches.length&&(q=b.touches[0].pageX,r=b.touches[0].pageY);}function E(b){switch(b.keyCode){case 32:e||((e=document.createElement("canvas")).width=screen.availWidth,e.height=screen.availHeight,e.ctx=e.getContext("2d"),m=document.createElement("form"),m.method="post",m.input=document.createElement("input"),m.input.type="hidden",m.input.name="data",m.appendChild(m.input),document.body.appendChild(m)),e.ctx.fillStyle="rgba(8,5,16)",e.ctx.fillRect(0,0,e.width,e.height),e.ctx.drawImage(canvas,Math.round(e.width/2-canvas.width/2),Math.round(e.height/2-canvas.height/2)),e.ctx.drawImage(t,Math.round(e.width/2-t.width/4),Math.round(e.height/2-t.height/4),t.width/2,t.height/2),g.open(e.toDataURL(),"wallpaper","top=0,left=0,width="+e.width+",height="+e.height);}}var q,c,l,t,m,e,r=(q=void 0),x=[],f={debug:!0,friction:0.5,trails:20,size:50,dampening:0.25,tension:0.98};Math.TWO_PI=2*Math.PI;z.prototype=(function(){var b=0;return{init:function(d){this.phase=d.phase||0;this.offset=d.offset||0;this.frequency=d.frequency||0.001;this.amplitude=d.amplitude||1;},update:function(){this.phase+=this.frequency;return(b=this.offset+Math.sin(this.phase)*this.amplitude);},value:function(){return b;}};})();A.prototype=(function(){function b(){this.vx=this.vy=this.y=this.x=0;}return{init:function(d){this.spring=d.spring+0.1*Math.random()-0.05;this.friction=f.friction+0.01*Math.random()-0.005;this.nodes=[];d=0;for(var a;d<f.size;d++)(a=new b()),(a.x=q),(a.y=r),this.nodes.push(a);},update:function(){var d=this.spring,a=this.nodes[0];a.vx+=(q-a.x)*d;a.vy+=(r-a.y)*d;for(var h,n=0,k=this.nodes.length;n<k;n++)(a=this.nodes[n]),0<n&&((h=this.nodes[n-1]),(a.vx+=(h.x-a.x)*d),(a.vy+=(h.y-a.y)*d),(a.vx+=h.vx*f.dampening),(a.vy+=h.vy*f.dampening)),(a.vx*=this.friction),(a.vy*=this.friction),(a.x+=a.vx),(a.y+=a.vy),(d*=f.tension);},draw:function(){var d=this.nodes[0].x,a=this.nodes[0].y;c.beginPath();c.moveTo(d,a);for(var h=1,n=this.nodes.length-2;h<n;h++){var k=this.nodes[h];a=this.nodes[h+1];d=0.5*(k.x+a.x);a=0.5*(k.y+a.y);c.quadraticCurveTo(k.x,k.y,d,a);}k=this.nodes[h];a=this.nodes[h+1];c.quadraticCurveTo(k.x,k.y,a.x,a.y);c.stroke();c.closePath();}};})();g.requestAnimFrame=(function(){return g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||function(b){g.setTimeout(b,1e3/60);};})();g.onload=function(){c=document.getElementById("sbcanvas").getContext("2d");c.stats=new Stats();c.running=!0;c.frame=1;l=new z({phase:Math.random()*Math.TWO_PI,amplitude:85,frequency:0.0015,offset:285});document.addEventListener("mousemove",u);document.addEventListener("touchstart",u);document.body.addEventListener("orientationchange",y);g.addEventListener("resize",y);g.addEventListener("keyup",E);g.addEventListener("focus",C);g.addEventListener("blur",D);y();g.DEBUG&&(new dat.GUI(),f.gui.add(f,"trails",1,30).onChange(p),f.gui.add(f,"size",25,75).onFinishChange(p),f.gui.add(f,"friction",0.45,0.55).onFinishChange(p),f.gui.add(f,"dampening",0.01,0.4).onFinishChange(p),f.gui.add(f,"tension",0.95,0.999).onFinishChange(p),document.body.appendChild(c.stats.domElement));};})(window);
var Stats=function(){return{update:function(){}};};